# Sprint Plan — sprint_jan_2026_1 (01.01.2026–15.01.2026, услуги/тарифы + расширение календаря + массовые брони)

## 1. Цели спринта

- Внедрить услуги специалистов: модель, связь со специалистами, интеграция в модалки бронирования.
- Включить сценарную логику длительности брони для «Музыкальная школа» на базе длительности услуги.
- Реализовать тарифы для «Репетиционная точка / Музыкальный класс»: модель, фильтрация/валидации в модалках, «дыры» в календаре.
- Существенно улучшить UX и производительность календаря: режим рабочего времени комнаты, визуальные статусы, дополнительные пресеты и попапы.
- Запустить контур массового создания бронирований из одной модалки: UI «плюс» для добавления блоков и модель данных формы (до уровня готовой формы из нескольких блоков).

Общий целевой объём спринта: ≈88,5 h.

---

## 2. Задачи спринта

### 2.1. Услуги специалистов и длительность брони

- [High · 6 h · Done] Услуги специалистов: модель (название, активность, стоимость, длительность) + связь many‑to‑many со специалистами + админка
- [High · 6 h · Done] Услуги специалистов: интеграция в модалки создания/редактирования брони (загрузка списка, сохранение в бронь, валидации)
- [High · 8 h · Done] Музыкальная школа: длительность брони от выбранной услуги специалиста (автоподстановка/ограничения длительности)

**Итого по разделу 2.1:** 20 h

---

### 2.2. Тарифы и ограничения бронирований (Репетиционная точка / Музыкальный класс)

- [High · 10 h · Done] Тарифы (Репетиционная точка/Музыкальный класс): модель тарифов и ограничений (дни недели, время, комнаты, количество людей, длительность, стоимость)
- [High · 4 h · Done] Бронирования: поле «количество людей» в модели брони + запись/редактирование/отображение в модалках (создание/редактирование/инфо)
- [High · 8 h · Done] Тарифы: интеграция в модалки брони (фильтрация доступных тарифов по сценарию/комнате/времени/количеству людей, валидации)
- [High · 6 h · Done] Календарь: «дыры» в расписании по тарифам (недоступные ячейки, если тарифы не закрывают рабочие интервалы)

**Итого по разделу 2.2:** 28 h

---

### 2.3. Календарь и таблица: UX и производительность

- [Medium · 1 h · Done] Сетка календаря: фон блока брони «зеброй» (полосками) для броней, которые ещё не полностью оплачены
- [Medium · 1 h · Done] Обновление набора пресетов календаря: «Сегодня, Вчера, Завтра, Эта неделя, Прошлая неделя, Следующая неделя, Этот месяц, Прошлый месяц»
- [High · 6 h · Done] Сетка календаря по режиму работы комнаты (ограничение отображаемого времени рабочими часами комнаты, деактивация ячеек вне рабочего времени сценария)
- [Medium · 0,5 h · Done] Pop-up на пустую ячейку: скруглённые углы без границы, как у попапа занятой ячейки
- [High · 6 h · Done] Отрисовка всех броней всех сценариев на календаре с серым отображением и блокировкой создания/редактирования в ячейках, занятых другими сценариями

**Итого по разделу 2.3:** 14,5 h

---

### 2.4. Главная: фильтры и списки

- [Medium · 2 h · Done] Правый нижний угол: попап с кнопкой «вверх»
- [Medium · 1 h · Done] Дефолт блока специалистов: всё свёрнуто
- [High · 2 h · Done] Блок специалистов: интерактивное сворачивание/разворачивание

**Итого по разделу 2.4:** 5 h

---

### 2.5. Авторизация и сессии
- [Medium · 1 h · Done] Перенос дизайна попапа информации о пользователе из Figma
- [Medium · 2 h · Done] Функционал выхода из системы (кнопка «Выйти» в попапе пользователя, очистка сессии, редирект на окно авторизации)
- [High · 1 h · Done] Шаблон попапа информации о пользователе с кнопкой «Выйти»

**Итого по разделу 2.5:** 4 h

---

### 2.6. Главная: уведомления и услуги

- [High · 4 h · Done] Счётчик заявок в шапке главной страницы: отображать количество броней в статусе «требует подтверждения» и обновлять его при создании и изменении таких броней
- [High · 3 h · Done] Поведение услуг: поиск + ранжировка по частоте (категории — позже)

**Итого по разделу 2.6:** 7 h

---

### 2.7. Создание бронирований (массовое): UI и модель формы

- [High · 2 h · Done] Проработка формы создания бронирований: разделение общих и блочных полей (клиент, комната, направление, специалист — общие; дата, время, длительность, доп. услуги, комментарий — в блоке), лимит 3 блока, копирование предыдущего блока, правила удаления, отображение ошибок по блокам
- [High · 4 h · Done] UI добавления нескольких блоков в модалке создания: кнопка добавления, копирование предыдущего блока, лимит 3 блока, удаление
- [High · 4 h · Done] Модель данных формы в виде массива блоков: синхронизация общих полей, независимые поля блоков, корректная сборка запроса

**Итого по разделу 2.7:** 10 h

---

**Суммарно по разделу 2:** 20 h + 28 h + 14,5 h + 5 h + 4 h + 7 h + 10 h = 88,5 h

## 3. Итог спринта

- Плановый объём спринта: **≈88,5 h**.
- Фокус: услуги специалистов и сценарная длительность брони для «Музыкальная школа», тарифы и ограничения бронирований для «Репетиционная точка / Музыкальный класс» (включая «количество людей» и «дыры»), улучшения календаря (производительность и ограничения отображения), контур массового создания бронирований (UI «плюс» для добавления блоков и модель формы), а также улучшения главной страницы (счётчик заявок, UX списков/фильтров, поиск услуг).
