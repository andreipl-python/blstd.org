# Sprint Plan — sprint_feb_2026_1 (09.02.2026–28.02.2026, специалисты + абонементы + подготовка деплоя)

## 1. Цели спринта

- Завершить модельный слой специалистов: роли, привязка к сценариям, расписание с поддержкой пересечений между сценариями, endpoint для календаря — минимум для отображения расписания техников и звукорежиссеров.
- Создать модели абонементов для всех трёх сценариев (МШ, РТ, МК), тарифные единицы и UI добавления/просмотра абонементов — минимум для работы абонементов.
- Подготовить миграцию данных: VPS, анализ старой БД, скрипты переноса данных. Сам деплой и перенос — в следующем спринте.

Общий целевой объём спринта: **90 h**.

---

## 2. Задачи спринта

### 2.1. Модели специалистов и расписание (26 h)

- [High · 6 h · Done] Модель «Специалист»: роль (звукорежиссер/техник), миграция, формы/админка
- [High · 4 h · Planned] Модель «Специалист»: M2M со сценариями + правила выборки/фильтрации специалистов по сценарию
- [High · 6 h · Planned] Расписание специалистов (Backend): модель рабочих интервалов с привязкой к сценарию, миграция, формы/админка
- [High · 6 h · Planned] Расписание специалистов (Backend): логика пересечений между сценариями, валидация, мерж интервалов
- [High · 4 h · Planned] Расписание специалистов (Backend): endpoint/контракт для календаря (группы по ролям, фильтр по сценарию, диапазон дат)

---

### 2.2. Абонементы — модели (20 h)

- [High · 5 h · Planned] Модель абонемента «Музыкальная школа»: определение модели (направления not null, услуга специалиста, номинал, стоимость, срок действия, название), миграция, формы/админка
- [High · 5 h · Planned] Модель абонемента «Музыкальная школа»: бизнес‑логика (валидация обязательных направлений, расчёт остатка услуг, правила активности и срока действия)
- [High · 5 h · Planned] Модель абонемента «Репетиционная точка/Музыкальный класс»: определение модели (тариф, номинал, стоимость, срок действия, название), миграция, формы/админка
- [High · 5 h · Planned] Модель абонемента «Репетиционная точка/Музыкальный класс»: бизнес‑логика (привязка тарифа, расчёт остатка, правила активности и срока действия)

---

### 2.3. Тарифные единицы (8 h)

- [High · 4 h · Planned] Функционал тарифных единиц: модель тарифной единицы, привязка к абонементу, миграция
- [High · 4 h · Planned] Функционал тарифных единиц: расчёт остатка, учёт списаний, API баланса

---

### 2.4. Абонементы — UI модалок (14 h)

- [High · 2 h · Planned] Шаблон модального окна добавления абонемента
- [High · 2 h · Planned] Сценарно‑зависимый шаблон модалки добавления абонемента (Музыкальная школа / Репетиционная точка / Музыкальный класс)
- [High · 4 h · Planned] Функционал модального окна добавления абонемента (привязка к клиенту, сценарию и срокам)
- [High · 6 h · Planned] Модалка добавления абонемента: сценарная логика (какие поля/модели используются в зависимости от выбранного сценария на главной)

---

### 2.5. Абонементы клиента — просмотр (8 h)

- [High · 2 h · Planned] Шаблон модального окна «Абонементы клиента» (список абонементов, пометка «групповой»)
- [High · 6 h · Planned] Информация об абонементах клиента: API/эндпоинт + модалка «Абонементы клиента» (сценарно‑зависимый список)

---

### 2.6. Подготовка миграции и деплоя (14 h)

- [High · 2 h · Planned] Подготовка VPS: создание и первичная настройка виртуального сервера (ОС, SSH‑ключи, firewall, базовое окружение)
- [High · 4 h · Planned] Анализ структуры базы данных старого приложения и разработка стратегии переноса совместно с заказчиком
- [High · 8 h · Planned] Написание скриптов для автоматизации переноса данных из старой БД в новую (с согласованием моделей данных)

---

## 3. Итог спринта

- Плановый объём: **26 + 20 + 8 + 14 + 8 + 14 = 90 h**.
- Фокус: **специалисты** (роли, сценарии, расписание, endpoint) → **абонементы** (модели МШ/РТ/МК, тарифные единицы, UI добавления/просмотра) → **подготовка деплоя** (VPS, анализ БД, скрипты переноса).
