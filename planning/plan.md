# CRM Project Plan

## 1. UI/UX: Основные экраны и взаимодействия

- **Главная страница**
  - Календарь как в Meta (функционал, без дизайна)
    - [High · 14 h] Подготовить API/сервис для работы с диапазонами дат и часов работы объектов
    - [High · 24 h] Реализовать UI-компонент календаря на два месяца с навигацией и множественным выбором диапазона
    - [Medium · 8 h · зависит от «API/сервис» и «UI-компонент»] Добавить предустановленные диапазоны (сегодня, 7 дней, месяц, настраиваемый диапазон)
    - [Medium · 10 h · зависит от «Предустановленные диапазоны»] Добавить режим сравнения периодов с вторым диапазоном и отображением выбора
    - [High · 14 h · зависит от «UI-компонент», «Предустановленные диапазоны», «Режим сравнения»] Интегрировать календарь с фильтрами и таблицей броней (передача выбранных диапазонов, обновление данных)
  - [High · Ожидание дизайнера] Дизайн календаря (ждём от дизайнера)
  - [Medium · 2 h] Правый нижний угол: попап с кнопкой «вверх»
  - [High · 4 h] Счётчик заявок в шапке главной страницы: отображать количество броней в статусе «требует подтверждения» и обновлять его при создании и изменении таких броней
- **Фильтры и списки**
  - [Medium · 1 h] Дефолт фильтра объектов: первая запись
  - [Medium · 1 h] Дефолт фильтра сценариев: первая запись
  - [Medium · 1 h] Дефолт блока специалистов: всё свёрнуто
  - [High · 2 h] Блок специалистов: интерактивное сворачивание/разворачивание
  - [High · 1 h] Поведение списка клиентов: 10 строк, скролл, ранжировка по алфавиту
- **Календарь и таблица**
  - [High · 3 h] Дефолтное время в календаре = время работы сценария (кратно часу)
  - [Medium · 2 h] Визуальное выделение забронированных ячеек в сетке календаря (фон блока брони)
  - [Medium · 0,5 h · зависит от «Визуальное выделение забронированных ячеек в сетке календаря (фон блока брони)»] Полупрозрачное отображение броней в статусах до подтверждения в сетке календаря (50% прозрачность фона блока брони)
  - [Medium · 3 h] Всплывающее окно для забронированной ячейки в сетке календаря с краткой информацией о брони
  - [Medium · 0,5 h] Индикатор комментария: точка в правом верхнем углу блока брони, если у брони есть непустой комментарий
  - [High · 12 h · зависит от «Интегрировать календарь с фильтрами и таблицей броней»] Обновление сетки календаря по триггеру успешного создания/редактирования/удаления брони в том же интерфейсе: AJAX‑обновление блока без перезагрузки страницы, с возможностью запуска при записи брони в БД из внешнего API сайта
- **Модальные окна**
  - [High · 4 h] Шаблон модального окна удаления брони

## 2. Функциональность и бизнес-логика

- **Специалисты и направления**
  - [High · 14 h] Добавить атрибут «направление» (множественный) + синхронизировать выбор в модалках создания/редактирования
- **Услуги и поиск**
  - [High · 3 h] Поведение услуг: поиск + ранжировка по частоте (категории — позже)
- **Бронирования и расписание**
  - [High · 6 h · зависит от «Подготовить API/сервис для работы с диапазонами дат и часов работы объектов»] В модалках создания и редактирования брони при изменении даты пересчитывать доступное время начала, длительность и окончание с учётом расписания сценария/объекта
- **Оплаты и биллинг**
  - [High · 2 h] В модальном окне оплаты при добавлении нового способа оплаты исключать из списка уже выбранные по этой брони способы оплаты
  - [Medium · 2 h] В модальном окне оплаты отображать блок «Итого» — сумму всех внесённых по брони платежей (если больше одного способа оплаты)
  - [Medium · 2 h] В модальном окне оплаты добавить показатель «К оплате» (остаток к оплате: стоимость брони минус внесённые платежи)
  - [High · 1,5 h] Если бронь полностью оплачена, кнопка «Внести оплату» заменяется неактивной кнопкой «Оплачено» по стилю кнопки «Добавить клиента» на главной
  - [High · 1 h] Ограничить ввод суммы оплаты остатком к оплате по текущей брони
- **Фавикон**
  - [Low · Ожидание от Кирилла] Фавикон (файл пришлёт Кирилл)

## 3. Аналитика и отчётность

- [Medium · Ожидание данных] Черновик структуры аналитики (получить от Кирилла)

## 4. Зависимости и порядок

1. Блоки фильтров и дефолтные состояния (раздел 1: UI/UX → «Фильтры и списки») задают UX по умолчанию.
2. Логика специалистов/направлений (раздел 2: Функциональность и бизнес‑логика → «Специалисты и направления») важна до переработки модалок.
3. Календарь (раздел 1: UI/UX → «Календарь и таблица») требует дизайна и внедрения компонента.
4. Поведение услуг и клиентов (раздел 1: UI/UX → «Фильтры и списки» и раздел 2: «Услуги и поиск») опирается на готовые списки.
5. Модальные окна (раздел 1: UI/UX → «Модальные окна») зависят от логики специалистов/направлений и календаря.
6. Аналитика (раздел 3) и фавикон (раздел 2: «Фавикон») выполняются после получения внешних материалов.
7. Оплаты и биллинг (раздел 2: «Оплаты и биллинг») выполняются после базовой логики бронирований и расписания (раздел 2: «Бронирования и расписание») и ключевых модальных окон (раздел 1: «Модальные окна»).
