# CRM Project Plan

## 1. UI/UX: Основные экраны и взаимодействия

- **Главная страница**
  - Календарь как в Meta (функционал, без дизайна)
    - [High · 14 h] Подготовить API/сервис для работы с диапазонами дат и часов работы объектов
    - [High · 24 h] Реализовать UI-компонент календаря на два месяца с навигацией и множественным выбором диапазона
    - [Medium · 8 h] Добавить предустановленные диапазоны (сегодня, 7 дней, месяц, настраиваемый диапазон)
    - [Medium · 10 h] Добавить режим сравнения периодов с вторым диапазоном и отображением выбора
    - [High · 14 h] Интегрировать календарь с фильтрами и таблицей броней (передача выбранных диапазонов, обновление данных)
  - [High · Ожидание дизайнера] Дизайн календаря (ждём от дизайнера)
  - [Medium · 2 h] Правый нижний угол: попап с кнопкой «вверх»
  - [High · 4 h] Счётчик заявок в шапке главной страницы: отображать количество броней в статусе «требует подтверждения» и обновлять его при создании и изменении таких броней
- **Фильтры и списки**
  - [Medium · 1 h] Дефолт фильтра объектов: первая запись
  - [Medium · 1 h] Дефолт фильтра сценариев: первая запись
  - [Medium · 1 h] Дефолт блока специалистов: всё свёрнуто
  - [High · 2 h] Блок специалистов: интерактивное сворачивание/разворачивание
  - [High · 1 h] Поведение списка клиентов: 10 строк, скролл, ранжировка по алфавиту
- **Календарь и таблица**
  - [High · 3 h] Дефолтное время в календаре = время работы сценария (кратно часу)
  - [Medium · 0,5 h] Полупрозрачное отображение броней в статусах до подтверждения в сетке календаря (50% прозрачность фона блока брони)
  - [Medium · 3 h] Всплывающее окно для забронированной ячейки в сетке календаря с краткой информацией о брони
  - [Medium · 0,5 h] Индикатор комментария: точка в правом верхнем углу блока брони, если у брони есть непустой комментарий
  - [Medium · 1 h] Сетка календаря: фон блока брони «зеброй» (полосками) для броней, которые ещё не полностью оплачены
 
- **Модальные окна**
  - [High · 4 h] Шаблон модального окна удаления брони

## 2. Функциональность и бизнес-логика

- **Специалисты и направления**
  - [High · 14 h] Добавить атрибут «направление» (множественный) + синхронизировать выбор в модалках создания/редактирования
- **Услуги и поиск**
  - [High · 3 h] Поведение услуг: поиск + ранжировка по частоте (категории — позже)
- **Бронирования и расписание**
  - [High · 6 h] В модалках создания и редактирования брони при изменении даты пересчитывать доступное время начала, длительность и окончание с учётом расписания сценария/объекта
- **Оплаты и биллинг**
  - [Medium · 1 h · после макета дизайна] В модальном окне оплаты: перенос финального дизайна блока «Итого» из Figma
  - [High · 2 h] Модальное окно оплаты: анимация перехода кнопки «Внести оплату» в неактивное состояние «Оплачено» без исчезновения элемента (плавное затухание/проявление и изменение состояния кнопки)
  - [Medium · 3 h] Модальное окно истории оплат: фронтовый шаблон и базовая вёрстка отдельной модалки истории платежей, вызываемой из окна информации по брони
  - [Medium · 1 h · после макета дизайна] Модальное окно истории оплат: перенос финального дизайна модалки из Figma
  - [High · 4 h] Модальное окно истории оплат: загрузка и отображение истории платежей по брони (дата, сумма, способ оплаты, пользователь/комментарий)
  - [High · 6 h] Модальное окно истории оплат: функционал отмены отдельных платежей (смена статуса, перерасчёт «Внесено» и «Остаток», защита от повторной отмены)
  - [Medium · 2 h] Подтверждение отмены платежа через модальное окно подтверждения отмены с кастомным текстом и описанием последствий для оплаты
  - [High · 3 h] Модальное окно оплаты: интерактивный пересчёт показателя «Остаток» при изменении сумм в полях ввода (мгновенное обновление блока «Стоимость / Внесено / Остаток» без перезагрузки модального окна)
- **Фавикон**
  - [Low · Ожидание от Кирилла] Фавикон (файл пришлёт Кирилл)

## 3. Аналитика и отчётность

- [Medium · Ожидание данных] Черновик структуры аналитики (получить от Кирилла)

## 4. Зависимости и порядок

1. Фильтры и списки (раздел 1: UI/UX → «Фильтры и списки») задают UX по умолчанию и выполняются перед задачами, которые завязаны на поведение списков (клиенты, услуги и т.п.).
2. Логика специалистов/направлений (раздел 2: Функциональность и бизнес‑логика → «Специалисты и направления») должна быть реализована до переработки модалок и сложных сценариев бронирования.
3. Календарь как в Meta (раздел 1: UI/UX → «Главная страница»):
   - «Подготовить API/сервис для работы с диапазонами дат и часов работы объектов» — базовый слой для задач по диапазонам и расписанию.
   - «Реализовать UI-компонент календаря на два месяца…» может делаться параллельно, но требуется до интеграции с фильтрами и таблицей.
   - «Предустановленные диапазоны» выполняются после задач «API/сервис…» и «UI-компонент календаря».
   - «Режим сравнения периодов» выполняется после задачи «Предустановленные диапазоны».
   - «Интеграция календаря с фильтрами и таблицей броней» выполняется после задач «UI-компонент календаря», «Предустановленные диапазоны» и «Режим сравнения периодов».
4. Календарь и таблица (раздел 1: UI/UX → «Календарь и таблица»):
   - задачи по полупрозрачному отображению, всплывающему окну, индикатору комментария и «зебре» для неоплаченных броней выполняются после задачи «Интегрировать календарь с фильтрами и таблицей броней (передача выбранных диапазонов, обновление данных)».
5. Бронирования и расписание (раздел 2: Функциональность и бизнес‑логика → «Бронирования и расписание»):
   - пересчёт доступного времени в модалках создания/редактирования выполняется после реализации «API/сервиса для работы с диапазонами дат и часов работы объектов».
6. Оплаты и биллинг (раздел 2: Функциональность и бизнес‑логика → «Оплаты и биллинг»):
   - блок «Итого» в модальном окне оплаты реализуется до интерактивного пересчёта показателя «Остаток»;
   - модальное окно истории оплат:
     - шаблон/вёрстка модалки — база для всех задач по истории оплат;
     - загрузка и отображение истории платежей выполняется после шаблона модалки;
     - функционал отмены отдельных платежей выполняется после загрузки и отображения истории;
     - подтверждение отмены платежа через модальное окно подтверждения выполняется после реализации отмены платежей.
7. Модальные окна (раздел 1: UI/UX → «Модальные окна») в целом зависят от логики специалистов/направлений и календаря (разделы 1–2) и развиваются после основных сценариев бронирования.
8. Аналитика (раздел 3) и фавикон (раздел 2: «Фавикон») выполняются после получения внешних материалов (данные по аналитике, файл иконки).
9. Оплаты и биллинг (раздел 2: «Оплаты и биллинг») в целом выполняются после базовой логики бронирований и расписания (раздел 2 → «Бронирования и расписание») и ключевых модальных окон (раздел 1 → «Модальные окна»).
